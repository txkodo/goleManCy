import { base64ToBuffer } from "./b64";
import { promises } from "fs";

const test = async () => {
    const source = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAABZFJREFUeF7tWrtLO00U3a0UMVgoBBQCQrqAYGdlIVhYaWVpI1ZWxl7RPyBWVnaWVlpZCBZW6axSCKmCCgFFJSLamB9nPu5yM5nXzu6ax5cFMdmZuXPvmXMfM5kwsDwnJydt6jI5OSk+fn5+KkfJ7b+/v8H+/n5om8PWTjrs7e0JWfJ323hTu1U5TAbDxsbGgvHxcSHr+/s7+Pn50QLBJySlfZXk829tbQl9z8/P2zR/UvlOAGBSWl0yRMcC2dCkCupWOy0WWAE4OzsTLgAG8AcrYAMDoO3s7Fjn8GVHGuOsygEATn+alNzAFhMGHgCimskFDg4OlItxfHwcJHWBNFY50yCoM54mbbVaVpZlbWQiACqViogBYRhGgRABsN3+LzseHh4a9U8KQC6Xi9IwyZLf4TufR/5uBMCU52EkN7BSqQhZ5XI5knl0dCTA4ZnCtU7AGLiILqJzQ9FXBQB/T0rZ6gbeHk1OBiDgvb6+itVutVoCgHq9HhSLxQAAoH13dzd6BwByuZyoCaanp6P6AOMJCPo8NzcXfHx8iPeqdjleEAA0PweA3ukAMMmn2gJ6hBTlkdYo2kPJqakpoSxWmyY7PT0VxdD29nYHKNQX/yk70DtKoZDP2zEXFTMAjoocTldfACADxRIWEo9KPrWHhUIh8jE+OeX5r68vo49PTEyIdrlOcA1sjUZD+A/pQd/xTnYBnUw5zqhk6eYQDKDV0jHAZAzcwsYAU7upTjABwCmeJNB6M4AU+AsGwAXxIA7hkb8nYgAPCLTpIX/lMUCnADHg8fExmJmZiR0EkWnK5bKyVkjKAErhOvlo78oCMBTRERH7/f0d21mlBxADCICnp6eOOkE1SN4uk/FQRKekKRaYqM9lquTTuy7k5aB4fX0d2YK0uLS0ZKzs7u/vlUGVhKyvrxvjIw+Cqo7NZlPIhy6Li4tcN6+KcwSAjPKIAVJdkMQFlpeXBb53d3cRzn3nAqVSSeuz8DPVg9KXHv6Z3l1dXQUvLy+IF+JVtVoVGcJkPMbwh/rK76kP5MsP6hjSJ5/PO8WEEAA0Go0OWYVCQXxPCsDKyoqQc3t7awVAFxn/BAA++ezsbGT88/OzFwMwCIovLCwIwwGAjfp9AYDMBFD44eGhSzebCxjzXMzGnjAA1Kc/nxgQ00ZjdxUAKv+HEO8YgMGuq4++rgwAiFB2fn7eG5OeMADawv99g6C3tYqBfw4A1yEpAGkwoFareeHpukUWaVCe4eLiQrxaW1tTTk7F0ebmZoc7eGlqGZQ5ALS5UOmhCzZIbfSY0ttAMCBLANJgROYMqNVqsUphufRVuQkdsNK5Ih2A6s4NTf3f3t68cHSOAV7Sh2iQ04ZhiOztMmUEwDCvrottmTAAmQUptFQqCfkItEidrnt0F8XT6iMKoVqtFgsIXjypxg4UADKSq6urIi3e3NzEAkWWAxBoxfnntFYuLTkdpbC8mgBDBYSOAfiZrd+vxMjARS5ArqAzmg8cKgB0VHIBwoWG+Xy+3Ww2vd3JVKqb5ncNuJELEP1dYoAtCLoA49oncwBcFfHtl5QBvvO6jlNSkzZIlMdlYbr2gQyCtu2wDAIVNQQK9zXVr7ADyQAyDsbqWOBKsX7vF9rOAzY2NjpsuLy87DgGG3SAvNOTbmXlX5dxvsgPUWyA1ev1NvWnKzGYy/WAIy7jRgDERczWf8QA6X7B0LuA6qKl6s6Aijk4NucXMKgPP3bXjSsWi6m4r1KI6dIEVwjl81ACYPNz3j6UAPzvGdBrAMAwUxxA7Mg0BgySCyTdLg98EMwEgL9kQNa//dlsSXweoMoC/P6ASgF+/6DnAKh2g7ZChIxyuT9gWgF+mdK2UnJ7WpujLgbEPQNICiDdJu0ZANVqtet+QJxSVqW463iM7TUA/wBP/dd+3lQiWQAAAABJRU5ErkJggg=="
    const buffer = base64ToBuffer(source)
    promises.writeFile('test.png',buffer)
}

test()